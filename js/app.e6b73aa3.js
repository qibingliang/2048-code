(function(t){function e(e){for(var i,o,a=e[0],c=e[1],u=e[2],f=0,l=[];f<a.length;f++)o=a[f],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&l.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);h&&h(e);while(l.length)l.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],i=!0,a=1;a<r.length;a++){var c=r[a];0!==n[c]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=r[0]))}return t}var i={},n={app:0},s=[];function o(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=i,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(r,i,function(e){return t[e]}.bind(null,i));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var h=c;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var i=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("v-app",[r("router-view")],1)],1)},s=[],o=(r("7c55"),r("2877")),a={},c=Object(o["a"])(a,n,s,!1,null,null,null),u=c.exports,h=r("8c4f"),f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"home",staticClass:"home"},[r("div",{staticClass:"header"},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{xs6:""}},[r("div",{staticClass:"number"},[r("p",[t._v("分数")]),r("p",[t._v(t._s(t.scores))])])]),r("v-flex",{attrs:{xs6:""}},[r("div",{staticClass:"number"},[r("p",[t._v("最高分")]),r("p",[t._v(t._s(t.highScores))])])]),r("v-flex",{attrs:{xs6:""}},[r("v-btn",{attrs:{color:"warning"},nativeOn:{click:function(e){return t.revocation()}}},[t._v("撤销("+t._s(t.revocationNum)+")")])],1),r("v-flex",{attrs:{xs6:""}},[r("v-btn",{attrs:{color:"warning"},nativeOn:{click:function(e){return t.restart()}}},[t._v("重新开始")])],1)],1)],1),r("div",{staticClass:"content"},[r("div",{directives:[{name:"touch",rawName:"v-touch",value:{left:function(){return t.swipe("Left")},right:function(){return t.swipe("Right")},up:function(){return t.swipe("Up")},down:function(){return t.swipe("Down")}},expression:"{\n            left: () => swipe('Left'),\n            right: () => swipe('Right'),\n            up: () => swipe('Up'),\n            down: () => swipe('Down')\n        }"}],staticClass:"chessboard"},t._l(t.DataList,(function(e,i){return r("v-layout",{key:i,attrs:{row:"",wrap:""}},t._l(e,(function(e,n){return r("v-flex",{key:i+"-"+n,attrs:{xs3:""}},[r("div",{staticClass:"grid",class:e>128?"color_128":"color_"+e,style:{width:t.gridWidth+"px",height:t.gridWidth+"px","line-height":t.gridWidth+"px"}},[t._v("\n                            "+t._s(0==e?"":e)+"\n                        ")])])})),1)})),1),r("v-layout",{attrs:{row:"","justify-space-around":""}},[r("v-flex",{attrs:{xs4:""}},[r("v-btn",{attrs:{color:"info"},on:{click:function(e){return t.swipe("Up")}}},[t._v("上")])],1)],1),r("v-layout",{attrs:{row:"","justify-center":""}},[r("v-flex",{attrs:{xs4:""}},[r("v-btn",{attrs:{color:"info"},on:{click:function(e){return t.swipe("Left")}}},[t._v("左")])],1),r("v-flex",{attrs:{xs4:""}},[r("v-btn",{attrs:{color:"info"},on:{click:function(e){return t.swipe("Down")}}},[t._v("下")])],1),r("v-flex",{attrs:{xs4:""}},[r("v-btn",{attrs:{color:"info"},on:{click:function(e){return t.swipe("Right")}}},[t._v("右")])],1)],1)],1)])},l=[],p=(r("6c7b"),r("ac6a"),r("2909")),v=(r("6b54"),{name:"home",components:{},data:function(){return{DataList:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],gridWidth:0,scores:0,highScores:0,stepList:[],revocationNum:3,time:{s:0,m:0,h:0},timeM:null}},watch:{scores:function(t){t>this.highScores&&(this.highScores=t,window.localStorage.setItem("highScores",this.highScores))}},computed:{},methods:{revocation:function(){console.log(this.stepList),this.revocationNum>0&&this.stepList.length&&this.stepList.length>0?(this.$set(this,"DataList",this.stepList.pop()),this.revocationNum-=1):alert("不能再撤销了 ╮(╯▽╰)╭")},stepUpdate:function(t){0!=this.stepList.length&&this.stepList[this.stepList.length-1].toString()===t.toString()||this.stepList.push(Object(p["a"])(t))},ArrayCompute2:function(t){if(t.length>1){var e=[];if(t[0]==t[1]){var r=t[0]+t[1];this.scores+=r;var i=this.ArrayCompute2(t.slice(2,t.length));e=[r].concat(Object(p["a"])(i))}else if(2==t.length)e=t;else{var n=t[0];t.splice(0,1);var s=this.ArrayCompute2(Object(p["a"])(t));e=[n].concat(Object(p["a"])(s))}return e}return t},ArrayCompute:function(t){var e=[];t.forEach((function(t,r){t>0&&e.push(t)})),e=this.ArrayCompute2(Object(p["a"])(e));while(e.length<this.DataList.length)e.push(0);return e},move:function(t,e){var r=JSON.parse(JSON.stringify(e));switch(t){case"Left":for(var i=0;i<e.length;i++){var n=this.ArrayCompute(Object(p["a"])(e[i]));r[i]=n}break;case"Right":for(var s=0;s<e.length;s++){var o=Object(p["a"])(e[s]);o=this.ArrayCompute(o.reverse()).reverse(),r[s]=o}break;case"Up":for(var a=0;a<e.length;a++){for(var c=[],u=0;u<e.length;u++)c.push(e[u][a]);c=this.ArrayCompute(c);for(var h=0;h<e.length;h++)r[h][a]=c[h]}break;case"Down":for(var f=0;f<e.length;f++){for(var l=[],v=0;v<e.length;v++)l.push(e[v][f]);l=this.ArrayCompute(l.reverse()).reverse();for(var d=0;d<e.length;d++)r[d][f]=l[d]}break}return r},swipe:function(t){var e=JSON.parse(JSON.stringify(this.DataList));this.$set(this,"DataList",this.move(t,this.DataList));var r=JSON.parse(JSON.stringify(this.DataList)),i=[];if(r.forEach((function(t,e){t.forEach((function(t,r){0==t&&i.push([e,r])}))})),i.length>0||this.judge(t,r)){if(e.toString()===this.DataList.toString())return;var n=this.randomNumber(0,i.length-1);this.$set(this.DataList[i[n][0]],i[n][1],5==this.randomNumber(0,5)?4:2),this.stepUpdate(e)}else alert("游戏结束ヽ（≧□≦）ノ")},judge:function(t,e){var r=JSON.parse(JSON.stringify(e)),i="Left"==t||"Right"==t?"Up":"Left";return r.toString()!==this.move(i,e).toString()&&(console.log("还可以再抢救一下…(⊙_⊙;)…"),!0)},randomNumber:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},upGameTime:function(){var t=this;this.timeM&&(clearInterval(this.timeM),this.time.s=0,this.time.m=0,this.time.h=0),this.timeM=setInterval((function(){59==t.time.s?(t.time.s=0,59==t.time.m?(t.time.m=0,t.time.h++):t.time.m++):t.time.s++}),1e3)},restart:function(){this.scores=0,this.revocationNum=3,this.stepList=[],this.DataList.forEach((function(t){t.fill(0)})),this.$set(this.DataList[this.randomNumber(0,this.DataList.length-1)],this.randomNumber(0,this.DataList[0].length-1),3==this.randomNumber(0,3)?4:2),this.$set(this.DataList[this.randomNumber(0,this.DataList.length-1)],this.randomNumber(0,this.DataList[0].length-1),3==this.randomNumber(0,3)?4:2),this.stepUpdate(JSON.parse(JSON.stringify(this.DataList)))}},mounted:function(){var t=this,e=this;this.$nextTick((function(){t.gridWidth=(t.$refs.home.offsetWidth-74)/4})),window.onresize=function(){e.gridWidth=t.$refs.home.offsetWidth>500?106.5:(t.$refs.home.offsetWidth-74)/4},document.onkeydown=function(t){var r=window.event.keyCode;switch(r){case 37:e.swipe("Left");break;case 38:e.swipe("Up");break;case 39:e.swipe("Right");break;case 40:e.swipe("Down");break}},this.highScores=window.localStorage.getItem("highScores")||0,this.restart()},created:function(){}}),d=v,m=(r("de16"),Object(o["a"])(d,f,l,!1,null,null,null)),g=m.exports;i["default"].use(h["a"]);var w=new h["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:g}]}),b=r("2f62");i["default"].use(b["a"]);var y=new b["a"].Store({state:{},mutations:{},actions:{}}),L=r("9483");Object(L["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var O=r("ce5b"),S=r.n(O);r("bf40");i["default"].use(S.a),i["default"].config.productionTip=!1,new i["default"]({router:w,store:y,render:function(t){return t(u)}}).$mount("#app")},"5c48":function(t,e,r){},"7c55":function(t,e,r){"use strict";var i=r("5c48"),n=r.n(i);n.a},de16:function(t,e,r){"use strict";var i=r("f3e7"),n=r.n(i);n.a},f3e7:function(t,e,r){}});
//# sourceMappingURL=app.e6b73aa3.js.map